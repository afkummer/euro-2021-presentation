\section{Problem definition}

\begin{frame}[plain]
   \sectionpage
\end{frame}

\begin{frame}
   \frametitle{Home care in Brazil}

   \textbf{Pilot program ``Better in Home''}
   \begin{itemize}
      \item Program started in 2011
      \item Implemented in some big Brazilian cities
      %      \item Target population: patients eligible to home hospitalization
   \end{itemize}

   \begin{tikzpicture}[overlay]
   \node (a) at (12.2,0) {
      \includegraphics[scale=0.2]{fig/melhor-em-casa.png}
   };
   \node [below=1pt of a] {Source: DATASUS (2021)};
   \end{tikzpicture}

\end{frame}

\begin{frame}
   \frametitle{Home care in Brazil}

   \textbf{Motivation: } Solve a real problem in Porto Alegre

%   \vspace{12pt}
%
%   \textbf{Pilot program ``Better in Home''}
   \begin{itemize}
      \item Provides home hospitalization
%      \item Motivation: population growth and aging
      \item Opportunity for \textbf{knowledge transfer}
      \begin{itemize}
         \item E.g. SÃ£o Paulo e Rio de Janeiro
      \end{itemize}
%      \item Current approach: manual planning
   \end{itemize}

   \begin{tikzpicture}[overlay]
      \node (a) at (11.6,2) {
         \includegraphics[scale=0.2]{fig/melhor-em-casa.png}
      };
      \node [below=1pt of a] {Source: DATASUS (2021)};
   \end{tikzpicture}
\end{frame}

\begin{frame}
   \frametitle{Home Care in Porto Alegre}

   \textbf{The sizes of the problem}
   \begin{itemize}
      \item 19 caregivers %(team = car driver + a skilled physician)
      \item 300 patients visited per week
      \item Most of the \textbf{planning is manual}, daily basis
   \end{itemize}


\end{frame}

\begin{frame}
   \frametitle{Home Care in Porto Alegre}


   \textbf{Three-step manual approach}
   \begin{itemize}
      \item One experienced caregiver
      \item Step 1: chooses the patient of the day
      \item Step 2: assign the patients to the caregivers
      \item Step 3: individual routing of the caregivers
      \begin{itemize}
         \item Done by the vehicle drive
         \item Mostly a ``nearest neighbor'' strategy
      \end{itemize}
%      \item ``Hope for the best'' strategy
   \end{itemize}

\end{frame}

%\begin{frame}
%   \frametitle{Home Care in Porto Alegre}
%
%   \textbf{The problem is much more complex}
%   \begin{itemize}
%      \item Uncertainty regarding patients $\Rightarrow$ re-scheduling
%      \item Less vehicles available than the number of teams
%      \item Equipment needs to be carried according teams's planning
%%      \item Selection of training medical student
%   \end{itemize}
%\end{frame}

\begin{frame}
   \frametitle{Choosing a target problem}

   \textbf{Our methodology}
   \begin{itemize}
      \item Find a \textit{core} optimization problem
      \item Complex enough
      \begin{itemize}
         \item Valuable for the practitioner
         \item Interesting from the scientific perspective
      \end{itemize}
%      \item But not too much constrained/specific
   \end{itemize}

   \vspace*{18pt}
  \pause


   \textbf{Problem of choice: } The Home Health Care Routing \\
   \qquad \qquad \qquad \qquad ~~~~ and Scheduling Problem (HHCRSP)


   \begin{tikzpicture}[overlay]
   \node (a) at (11.8,3) {
      \includegraphics[scale=0.13]{fig/mankowska2014-paper.png}
   };
   \node [below=1pt of a] {\footnotesize \citet{mankowska2014}};
   \end{tikzpicture}

\end{frame}

%\begin{frame}
%   \frametitle{Our target problem}
%
%   \textbf{Some missing characteristics}
%   \begin{itemize}
%      \item Vehicle allocation
%      \item Medical equipment allocation
%      \item Starting point for knowledge transfer
%   \end{itemize}
%\end{frame}

\begin{frame}
   \frametitle{Our target problem}

   \textbf{The home health care routing and scheduling problem}
   \begin{itemize}
%      \item HHCRSP was introduced by \citet{mankowska2014}
      \item Routing (caregivers) and scheduling (patient visit times)
      \item A model, and heuristics
      \item A public standard benchmark dataset
   \end{itemize}

%   \vspace{20pt}

%   \centering\includegraphics[width=0.9\textwidth]{img/skilled}

\end{frame}


\frame{
   \frametitle{The HHCRSP}

   \textbf{Main characteristics}
   \begin{enumerate}
      \item Routing components
      \item Patient time-window
      \item Covered service types
      \item \onlyh{2}{InfRed}{Operations synchronization on multiple visits}
   \end{enumerate}
}

%
%
%\begin{frame}
%   \frametitle{The HHCRSP: domain features}
%   \textbf{Operations synchronization on double service patients}
%   \begin{itemize}
%      \item Special requirement for patients requiring two service types
%      \item Services must start simultaneously in some patients
%      \item Others have precedence constraints
%      \item Common feature container allocation/transshipment problems \citep{drexl2012synchronization}
%   \end{itemize}
%
%%   \vspace*{8pt}
%
%   \begin{figure}[H]
%      \includegraphics[width=1\textwidth,page=2]{fig/skilled}
%   \end{figure}
%
%\end{frame}

%\frame{
%   \frametitle{The HHCRSP}
%   \textbf{Multiple visit operations synchronization}
%   \begin{itemize}
%      \item Simultaneous attendance
%      \item Precedence constraints + separation time window
%   \end{itemize}
%
%   \begin{figure}[H]
%      \includegraphics[width=1\textwidth,page=2]{fig/skilled}
%   \end{figure}
%
%}

\begin{frame}
   \frametitle{The HHCRSP: Own characteristics}
   \textbf{Double service: precedence order}
   \begin{itemize}
      \item Service precedence: 2 > 5
      \item ($\delta^\mathrm{min}$) and ($\delta^\mathrm{max}$): separation time
   \end{itemize}

   \begin{figure}
      \centering
      \includegraphics[width=0.6\textwidth,page=1]{fig/sync-tsn2}
   \end{figure}
\end{frame}

\begin{frame}
   \frametitle{The HHCRSP: Own characteristics}
   \textbf{Double service: parallel attendance}
   \begin{itemize}
      \item Services must start simultaneously
   \end{itemize}

   \begin{figure}
      \centering
      \includegraphics[width=0.6\textwidth,page=2]{fig/sync-tsn2}
   \end{figure}
\end{frame}

\frame{
   \frametitle{The HHCRSP: some formal definitions}

   \textbf{Objective function}

%   \only<1> {
%      \begin{gather}
%         \mathrm{Minimize~} \lambda_1 D \; +
%         \lambda_2 T \; +
%         \lambda_3 T^\mathit{max} \nonumber
%      \end{gather}
%   }

%   \only<1> {
      \begin{gather}
      \mathrm{Minimize~}\color{InfRed} \lambda_1 \normalcolor D \; +
      \color{green} \lambda_2 \normalcolor T \; +
      \color{blue} \lambda_3 \normalcolor T^\mathit{max} \nonumber
      \end{gather}
%   }

   \vspace*{12pt}

   \textbf{Components}
   \begin{itemize}
      \item $D$: Sum of traveled distance
      \item $T$: Sum of tardiness
      \item $T^\mathrm{max}$: Maximum tardiness
   \end{itemize}

%   \begin{tikzpicture}[overlay]
%      \draw<3>[InfRed,line width=2pt] (4.3,3.4) rectangle +(0.9, 0.7);
%      \draw<3>[InfRed,line width=2pt] (-0.4, 1.54) rectangle +(6.4, 0.7);
%      \draw<4>[InfRed,line width=2pt] (5.55,3.4) rectangle +(0.9, 0.7);
%      \draw<4>[InfRed,line width=2pt] (-0.4, 0.95) rectangle +(6.4, 0.7);
%      \draw<5>[InfRed,line width=2pt] (6.85, 3.4) rectangle +(1.3, 0.7);
%      \draw<5>[InfRed,line width=2pt] (-0.4, 0.35) rectangle +(6.4, 0.7);
%   \end{tikzpicture}
}